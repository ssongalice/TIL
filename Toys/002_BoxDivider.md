# Box Divider

## 프로젝트 설명

- 캔버스 안에서 버튼을 누르면 하나의 사각형이 움직이기 시작. 경계선에 닿으면 튕겨서 방향이 바뀐다
- '쪼개기' 버튼을 누르면 점이 4등분으로 쪼개져서 서로 다른 방향으로 움직인다.

## 프로젝트 전 대략적인 구조 생각

- start를 누르면 -> drawing 계속 실행
  - 1. 캔버스 지우기 2) 사각형 그리기 3) 좌표 업데이트 무한루프
- 요소를 쪼개면?
  - 요소길이: 이전 요소의 1/2
  - 캔버스에 요소 추가하기 (추가된 요소의 좌표는 각각 달라야 한다 )
  - 좌표 업데이트 & 그리기 무한반복
  - 요소가 쪼개질 때마다 해당 요소의 좌표값을 가진 변수가 있어야 한다.

## 실제 구현 시 문제

### 1. 벽에 부딪치면 튕기는 원리

- box가 좌표에 대해 가지고 있어야 하는 정보 : `x, y, dx, dy`
- 벽에 닿고 나서 방향이 바뀌어야 함.
  - 현재 좌표 + 이동하는 간격이 경계선 제일 끝 좌표보다 크거나 시작점보다 작은 경우 방향을 바꿔야 함.
  - 해당 경우일 경우 dx, dy의 방향을 +/- 바꿔줌.

```javascript
// x 방향 변경
if (x + dx > limitX || x + dx < 0) {
  rect.getDx(-dx);
}

// y 방향 변경
if (y + dy > limitY || y + dy < 0) {
  rect.getDy(-dy);
}
```

### 2. dx, dy의 분리

- 처음에는 x,y를 구분하지 않고 하나의 d만 사용
- 하지만 공통이게 되면 x 또는 y 하나만 벽에 부딪쳐도 방향이 바뀌어서 문제가 생김
- x의 방향 dx, y의 방향 dy로 분리.

### 3. 방향 좌표 계산하기

- '쪼개기' 버튼을 클릭해서 4등분이 되면 각각의 좌표 또는 방향성이 바뀌어야 함.

```
(-dx, -dy): x좌표 왼쪽으로, y좌표 위로 이동
(-dx, dy): x좌표 왼쪽으로, y좌표 아래로 이동
(dx, -dy): x좌표 오른쪽으로, y좌표 위로 이동
(dx, dy): x좌표 오른쪽으로, y좌표 오른쪽으로 이동
```

### 4. 배열 -> Prototype 개념 활용하기

- 4-1. 배열로만 작업하면 위치를 기억해서 좌표를 받아오는 문제가 있었음
